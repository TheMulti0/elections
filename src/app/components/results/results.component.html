<div class="container text-right">

  <div class="row" *ngIf="!elections">

    <br />

    <mat-spinner style="margin:0 auto;"
                 mode="indeterminate">
    </mat-spinner>

  </div>

  <div *ngIf="elections">

    <div class="row">
      <h1> הבחירות לכנסת ה - {{ elections.knesset }} </h1>
    </div>

    <div class="row">
      <mat-checkbox [(ngModel)]="showAdvanced">
        <h4>
          הצג חישוב מורכב
        </h4>
      </mat-checkbox>
    </div>

    <hr>

    <div class="row" *ngIf="showAdvanced">
      <h4>מידע על מערכת הבחירות</h4>

      <mat-table *ngIf="showAdvanced" [dataSource]="[ elections ]">

        <ng-container *ngFor='let column of electionsInfoTable.columns'
                      [matColumnDef]="column.name">

          <mat-header-cell *matHeaderCellDef>
            {{ column.headerText }}
          </mat-header-cell>

          <mat-cell *matCellDef="let elections">
            {{ column.getContent(elections) }}
          </mat-cell>

          <mat-footer-cell *matFooterCellDef>
            {{ column.footerText }}
          </mat-footer-cell>

        </ng-container>

        <mat-header-row *matHeaderRowDef="electionsInfoTable.getColumnNames(); sticky: true"></mat-header-row>
        <mat-row *matRowDef="let row; columns: electionsInfoTable.getColumnNames();"></mat-row>
        <mat-footer-row *matFooterRowDef="electionsInfoTable.getColumnNames(); sticky: true"></mat-footer-row>

      </mat-table>

      <br />
    </div>

    <div class="row" *ngIf="specificBlocks">
      <h4>חלוקה למנדטים</h4>

      <div class="col">
        <ngx-charts-pie-chart
          [view]="chartSize"
          [scheme]="generalBlocksScheme"
          [results]="generalBlocks"
          [gradient]="true">
        </ngx-charts-pie-chart>
      </div>
      <div class="col">
        <ngx-charts-pie-chart
          [view]="chartSize"
          [scheme]="specificBlocksScheme"
          [results]="specificBlocks"
          [gradient]="true">
        </ngx-charts-pie-chart>
      </div>
      <div class="col">
        <ngx-charts-pie-chart
          [view]="chartSize"
          [scheme]="partiesScheme"
          [results]="parties"
          [gradient]="true">
        </ngx-charts-pie-chart>
      </div>
    </div>

    <hr>

    <div class="row">
      <h4>תוצאות הבחירות</h4>

      <mat-table *ngIf="showAdvanced" [dataSource]="elections.parties">

        <ng-container *ngFor='let column of extraPartiesTable.columns'
                      [matColumnDef]="column.name">

          <mat-header-cell *matHeaderCellDef>
            {{ column.headerText }}
          </mat-header-cell>

          <mat-cell *matCellDef="let party"
                    [style.background-color]="getPartyColor(party)">
            {{ column.getContent(party) }}
          </mat-cell>

          <mat-footer-cell *matFooterCellDef>
            {{ column.footerText }}
          </mat-footer-cell>

        </ng-container>

        <mat-header-row *matHeaderRowDef="extraPartiesTable.getColumnNames(); sticky: true"></mat-header-row>
        <mat-row *matRowDef="let row; columns: extraPartiesTable.getColumnNames();"></mat-row>
        <mat-footer-row *matFooterRowDef="extraPartiesTable.getColumnNames(); sticky: true"></mat-footer-row>

      </mat-table>

      <mat-table *ngIf="!showAdvanced" [dataSource]="elections.parties">

        <ng-container *ngFor='let column of partiesTable.columns'
                      [matColumnDef]="column.name">

          <mat-header-cell *matHeaderCellDef>
            {{ column.headerText }}
          </mat-header-cell>

          <mat-cell *matCellDef="let party"
                    [style.background-color]="getPartyColor(party)">
            {{ column.getContent(party) }}
          </mat-cell>

          <mat-footer-cell *matFooterCellDef>
            {{ column.footerText }}
          </mat-footer-cell>

        </ng-container>

        <mat-header-row *matHeaderRowDef="partiesTable.getColumnNames(); sticky: true"></mat-header-row>
        <mat-row *matRowDef="let row; columns: partiesTable.getColumnNames();"></mat-row>
        <mat-footer-row *matFooterRowDef="partiesTable.getColumnNames(); sticky: true"></mat-footer-row>

      </mat-table>
    </div>

  </div>

</div>
