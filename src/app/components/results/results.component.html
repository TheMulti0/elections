<div class="container text-right">

  <div class="row" *ngIf="!elections">

    <br />

    <mat-spinner style="margin:0 auto;"
                 mode="indeterminate">
    </mat-spinner>

  </div>

  <div class="mx-5"
       *ngIf="elections">

    <div class="row">
      <h1> הבחירות לכנסת ה - {{ elections.knesset }} </h1>
    </div>

    <div class="row">
      <mat-checkbox [(ngModel)]="showAdvanced">
        <h4>
          הצג חישוב מורכב
        </h4>
      </mat-checkbox>
    </div>

    <div class="row">
      <h4>מידע על מערכת הבחירות</h4>
    </div>
    <div class="row flex" *ngIf="showAdvanced">

      <app-table class="flex-fill"
                 [table]="electionsInfoTable"
                 [data]="[ elections ]"
                 [backgroundSupplier]="this.getElectionsInfoColor.bind(this)">
      </app-table>

      <br />
    </div>

    <div class="row">
      <h4>חלוקה למנדטים</h4>
    </div>
    <div class="row" *ngIf="specificBlocks">
      <div class="col">
        <ngx-charts-pie-chart
          [view]="chartSize"
          [scheme]="generalBlocksScheme"
          [results]="generalBlocks"
          [gradient]="true">
        </ngx-charts-pie-chart>
      </div>
      <div class="col">
        <ngx-charts-pie-chart
          [view]="chartSize"
          [scheme]="specificBlocksScheme"
          [results]="specificBlocks"
          [gradient]="true">
        </ngx-charts-pie-chart>
      </div>
      <div class="col">
        <ngx-charts-pie-chart
          [view]="chartSize"
          [scheme]="partiesScheme"
          [results]="parties"
          [gradient]="true">
        </ngx-charts-pie-chart>
      </div>
    </div>


    <div class="row">
      <h4>תוצאות הבחירות</h4>
    </div>
    <div class="row flex">
      <app-table class="flex-fill"
                 *ngIf="!showAdvanced"
                 [table]="partiesTable"
                 [data]="elections.parties"
                 [backgroundSupplier]="this.getPartyColor.bind(this)">
      </app-table>

      <app-table class="flex-fill"
                 *ngIf="showAdvanced"
                 [table]="extraPartiesTable"
                 [data]="elections.parties"
                 [backgroundSupplier]="this.getPartyColor.bind(this)">
      </app-table>
    </div>

  </div>

</div>
